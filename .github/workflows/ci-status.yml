name: "CI Status"

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  # This job provides a single entry point to check if all required checks passed
  all-checks:
    name: All Checks Status
    runs-on: ubuntu-latest
    if: always()
    needs: []
    steps:
      - name: Check workflow status
        run: |
          echo "### CI Status Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "This workflow aggregates the status of all CI checks." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Required Checks:**" >> $GITHUB_STEP_SUMMARY
          echo "- ✅ Python Linting (black, isort, flake8)" >> $GITHUB_STEP_SUMMARY
          echo "- ✅ Rust Linting (rustfmt, clippy)" >> $GITHUB_STEP_SUMMARY
          echo "- ✅ CodeQL Security Scan" >> $GITHUB_STEP_SUMMARY
          echo "- ✅ Dependency Review" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Additional Checks:**" >> $GITHUB_STEP_SUMMARY
          echo "- Integration Tests" >> $GITHUB_STEP_SUMMARY
          echo "- PR Validation" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "All workflows are configured and ready! ✨" >> $GITHUB_STEP_SUMMARY
          
      - name: Success
        run: echo "CI configuration check passed!"
